<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button (click)="openSettings()" class="settings-btn">
        <ion-icon slot="icon-only" name="cog-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" scroll-y="false">

  <!-- GALACTIC (STAR WARS) LAYOUT -->
  <ng-container *ngIf="currentTheme === 'galactic'">
    <div class="stars-container">
      <div class="star-layer"></div>
    </div>
    <div class="main-wrapper galactic">
      <header class="hero-section galactic">
        <div class="imperial-bracket left"></div>
        <h1 class="main-phrase">MANDO SEMANAL</h1>
        <p class="greeting-tagline">{{ greeting }}</p>
        <div class="imperial-bracket right"></div>
      </header>

      <div class="galactic-grid">
        <!-- COMPRA Y MENÚS (PRIORIDAD ALTA) -->
        <div class="tech-card logistics-panel wide" routerLink="/organiseitor/lista">
          <div class="scanline"></div>
          <div class="card-body horizontal">
            <div class="tech-icon-box"><ion-icon name="cart-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>SUMINISTROS</h3>
              <p>LISTA DE COMPRA ACTIVA</p>
            </div>
            <div class="status-badge">PRIORIDAD</div>
          </div>
        </div>

        <div class="tech-card navigation-panel wide" routerLink="/planificador">
          <div class="scanline"></div>
          <div class="card-body horizontal">
            <div class="tech-icon-box"><ion-icon name="navigate-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>NAVEGACIÓN</h3>
              <p>PLAN SEMANAL DE COMIDAS</p>
            </div>
            <ion-icon name="compass-outline" class="alt-icon"></ion-icon>
          </div>
        </div>

        <!-- FUNCIONALIDADES SECUNDARIAS (FILA COMPACTA) -->
        <div class="tech-card archives-panel" routerLink="/organiseitor/historial">
          <div class="scanline"></div>
          <div class="card-body">
            <div class="tech-icon-box"><ion-icon name="library-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>ARCHIVOS</h3>
              <p>HISTORIAL</p>
            </div>
          </div>
        </div>

        <div class="tech-card command-panel" routerLink="/gastos-casa">
          <div class="scanline"></div>
          <div class="card-body">
            <div class="tech-icon-box"><ion-icon name="business-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>SISTEMA</h3>
              <p>GASTOS</p>
            </div>
          </div>
        </div>

        <div class="tech-card credits-panel wide footer-module" routerLink="/balance-global">
          <div class="scanline"></div>
          <div class="card-body horizontal">
            <div class="tech-icon-box"><ion-icon name="card-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>CRÉDITOS GLOBALES</h3>
              <p>ESTADO FINANCIERO</p>
            </div>
            <div class="status-badge secondary">BALANCE</div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- CLASSIC (ORGANIC) LAYOUT -->
  <ng-container *ngIf="currentTheme !== 'galactic'">
    <div class="blob-bg blob-1"></div>
    <div class="blob-bg blob-2"></div>
    <div class="blob-bg blob-3"></div>

    <div class="main-wrapper classic">
      <header class="hero-section classic">
        <h1 class="main-phrase">Organizador Semanal</h1>
        <p class="greeting-tagline">{{ greeting }}</p>
      </header>

      <div class="organic-grid">
        <!-- PRINCIPAL: COMPRA Y MENÚS -->
        <div class="curvy-card shopping-glass">
          <div class="card-header">
            <div class="icon-sphere"><ion-icon name="cart"></ion-icon></div>
            <div class="text-group">
              <h3>La Compra</h3>
              <p>Gestión de suministros</p>
            </div>
          </div>
          <div class="pill-actions">
            <button class="pill-btn primary" routerLink="/organiseitor/lista"><span>Ver Lista</span></button>
            <button class="pill-btn secondary" routerLink="/organiseitor/historial"><span>Historial</span></button>
          </div>
        </div>

        <div class="curvy-card glass-module menu-module wide" routerLink="/planificador">
          <div class="module-content horizontal">
            <div class="icon-sphere"><ion-icon name="restaurant"></ion-icon></div>
            <div class="text-group">
              <h3>Menú Semanal</h3>
              <p>Planifica tus comidas</p>
            </div>
            <ion-icon name="calendar-outline" class="go-icon"></ion-icon>
          </div>
        </div>

        <!-- SECUNDARIO: GASTOS Y BALANCE -->
        <div class="curvy-card glass-module home-small-module compact" routerLink="/gastos-casa">
          <div class="module-content compact">
            <div class="icon-sphere"><ion-icon name="cash-outline"></ion-icon></div>
            <h3>Gastos</h3>
          </div>
        </div>

        <div class="curvy-card glass-module balance-small-module compact" routerLink="/balance-global">
          <div class="module-content compact">
            <div class="icon-sphere"><ion-icon name="analytics-outline"></ion-icon></div>
            <h3>Balance</h3>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

</ion-content>