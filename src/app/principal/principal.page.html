<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button (click)="openSettings()" class="settings-btn">
        <ion-icon slot="icon-only" name="cog-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" scroll-y="false">

  <!-- GALACTIC (STAR WARS) LAYOUT -->
  <ng-container *ngIf="currentTheme === 'galactic'">
    <div class="stars-container">
      <div class="star-layer"></div>
    </div>
    <div class="main-wrapper galactic">
      <header class="hero-section galactic">
        <div class="imperial-bracket left"></div>
        <h1 class="main-phrase">COMMAND CENTER</h1>
        <p class="greeting-tagline">{{ greeting }}</p>
        <div class="imperial-bracket right"></div>
      </header>

      <div class="galactic-grid">
        <!-- PILAR 1: LOGÍSTICA (LA COMPRA) -->
        <div class="tech-card logistics-panel" routerLink="/organiseitor/lista">
          <div class="scanline"></div>
          <div class="card-body">
            <div class="tech-icon-box"><ion-icon name="cart-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>SUMINISTROS</h3>
              <p>LISTA DE COMPRA</p>
            </div>
          </div>
        </div>

        <div class="tech-card archives-panel" routerLink="/organiseitor/historial">
          <div class="scanline"></div>
          <div class="card-body">
            <div class="tech-icon-box"><ion-icon name="library-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>ARCHIVOS</h3>
              <p>HISTORIAL</p>
            </div>
          </div>
        </div>

        <!-- PILAR 2: NAVEGACIÓN (MENÚS) -->
        <div class="tech-card navigation-panel wide" routerLink="/planificador">
          <div class="scanline"></div>
          <div class="card-body horizontal">
            <div class="tech-icon-box"><ion-icon name="navigate-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>NAVEGACIÓN</h3>
              <p>PLAN SEMANAL DE COMIDAS</p>
            </div>
            <ion-icon name="compass-outline" class="alt-icon"></ion-icon>
          </div>
        </div>

        <!-- PILAR 3: ESTACIÓN DE MANDO (GASTOS CASA) -->
        <div class="tech-card command-panel wide" routerLink="/gastos-casa">
          <div class="scanline"></div>
          <div class="card-body horizontal">
            <div class="tech-icon-box"><ion-icon name="business-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>ESTACIÓN DE MANDO</h3>
              <p>CONTROL CENTRAL DE GASTOS</p>
            </div>
            <ion-icon name="radio-outline" class="pulse-icon"></ion-icon>
          </div>
        </div>

        <!-- ACCIÓN GLOBAL: CRÉDITOS (BALANCE) -->
        <div class="tech-card credits-panel wide footer-module" routerLink="/balance-global">
          <div class="scanline"></div>
          <div class="card-body horizontal">
            <div class="tech-icon-box"><ion-icon name="card-outline"></ion-icon></div>
            <div class="tech-info">
              <h3>BALANCE DE CRÉDITOS</h3>
              <p>ESTADO FINANCIERO GLOBAL</p>
            </div>
            <div class="status-badge">GLOBAL</div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- CLASSIC (ORGANIC) LAYOUT -->
  <ng-container *ngIf="currentTheme !== 'galactic'">
    <div class="blob-bg blob-1"></div>
    <div class="blob-bg blob-2"></div>
    <div class="blob-bg blob-3"></div>

    <div class="main-wrapper classic">
      <header class="hero-section classic">
        <h1 class="main-phrase">¿Qué organizamos hoy?</h1>
        <p class="greeting-tagline">{{ greeting }}</p>
      </header>

      <div class="organic-grid">
        <!-- PILAR 1: LA COMPRA -->
        <div class="curvy-card shopping-glass">
          <div class="card-header">
            <div class="icon-sphere"><ion-icon name="cart"></ion-icon></div>
            <h3>La Compra</h3>
          </div>
          <div class="pill-actions">
            <button class="pill-btn primary" routerLink="/organiseitor/lista"><span>Lista</span></button>
            <button class="pill-btn secondary" routerLink="/organiseitor/historial"><span>Historial</span></button>
          </div>
        </div>

        <!-- PILAR 2: MENÚS -->
        <div class="curvy-card glass-module menu-module" routerLink="/planificador">
          <div class="module-content">
            <div class="icon-sphere"><ion-icon name="restaurant"></ion-icon></div>
            <h3>Menús</h3>
          </div>
        </div>

        <!-- PILAR 3: GASTOS CASA -->
        <div class="curvy-card glass-module home-small-module" routerLink="/gastos-casa">
          <div class="module-content">
            <div class="icon-sphere"><ion-icon name="home"></ion-icon></div>
            <h3>Gastos Casa</h3>
          </div>
        </div>

        <!-- ACCIÓN GLOBAL: BALANCE BALANCE -->
        <div class="curvy-card wide-glass balance-global-module" routerLink="/balance-global">
          <div class="module-content horizontal">
            <div class="icon-sphere"><ion-icon name="analytics"></ion-icon></div>
            <div class="text-group">
              <h3>Balance Global</h3>
              <p>Resumen de todos tus movimientos</p>
            </div>
            <ion-icon name="chevron-forward-outline" class="go-icon"></ion-icon>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

</ion-content>